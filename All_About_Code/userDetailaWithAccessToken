//getting the user access token from the response then passing it as a parameter
async function getAuthUser(token){ 
    console.log("access token: ", token)

    try {
        // using the provided endpoint
        const res = await fetch(`${BACKEND_URL}/auth/me`, {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`, 
            },  
        })


        const response = await res.json()
        console.log(response)
        // storing it in the localstorage encoded 
        localStorage.setItem(encode(USER_DATA_KEY), encode(JSON.stringify(response.data))) 

        
        // console.log(data)
    }catch(error){
        console.log(error)
    }finally{
        console.log('done')
    }   
    

}


// Call your function to get the authenticated user
//passed the access token as an argument to access the token from the data in the endpoint response
await getAuthUser(responseData.accessToken);